generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model ActiveReaderConfiguration {
  id                    Int      @id @default(autoincrement())
  readerConfigurationId Int      @unique
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  readerConfiguration ReaderConfiguration @relation(fields: [readerConfigurationId], references: [id], onDelete: Cascade)
}

model ReaderConfiguration {
  id               Int      @id @default(autoincrement())
  name             String
  rssiScanCount    Int
  rssiScanInterval Int
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  activeReaderConfiguration ActiveReaderConfiguration?
  frequencyConfiguration    FrequencyConfiguration[]
  Tag                       Tag[]
}

model FrequencyConfiguration {
  id                    Int      @id @default(autoincrement())
  readerConfigurationId Int
  frequency             String
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  readerConfiguration ReaderConfiguration? @relation(fields: [readerConfigurationId], references: [id], onDelete: Cascade)
  tag                 Tag[]
}

model Tag {
  id                    Int      @id @default(autoincrement())
  readerConfigurationId Int
  tag                   Bytes
  createdAt             DateTime @default(now())

  readerConfiguration    ReaderConfiguration?     @relation(fields: [readerConfigurationId], references: [id], onDelete: Cascade)
  frequencyConfiguration FrequencyConfiguration[]
  frequency              Frequency[]
}

model Frequency {
  id        Int    @id @default(autoincrement())
  tagId     Int
  frequency String

  tag  Tag?   @relation(fields: [tagId], references: [id], onDelete: Cascade)
  rssi RSSI[]
}

model RSSI {
  id          Int @id @default(autoincrement())
  frequencyId Int
  rssi        Int

  frequency Frequency? @relation(fields: [frequencyId], references: [id], onDelete: Cascade)
}
